<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>node-note</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/css/reset.less" rel="stylesheet/less"/>
    <link href="/css/main.less" rel="stylesheet/less"/>
    <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
    <script src="/js/less.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>

<div class="container edit_page">
    <header class="clearfix header">
        <a href="javascript:;" class="return-button">
            <i class="fa fa-chevron-left fa-lg memorandum"></i>
            备忘录
        </a>
        <strong class="complete f_r" id="complete">完成</strong>
    </header>
    <div class="content">
        <form>
            <div class="note-time">
                <%=notetime%>
            </div>
            <input type="hidden" value="<%=notetime%>" name="time">
            <textarea class="form-control text" rows="3" name="content"></textarea>
        </form>
    </div>
    <div class="footer clearfix">
        <span class="f_l trash">
            <i class="fa fa-trash fa-lg"></i>
        </span>
        <span class="f_r edit" id="edit">
            <i class="fa fa-edit fa-lg"></i>
        </span>
    </div>
</div>



<script src="js/jquery-1.11.3.min.js"></script>

<script type="text/javascript">
    //返回备忘录列表
    $('.return-button').click(function () {
        var content=$('.text').val();
        var data=decodeURIComponent($('form').serialize(),true);
        if (content=='') {
            window.location='/notePages';          
        } else{
            $.post('/record',{
                'data': data
            },function (result) {
                console.log(result);
                if (result=='1') {
                    window.location='/notePages';
                } else if(result=='-3'){
                    return;//数据库查询错误
                }      
            },'json')   
        }
    })
    //编辑
    $('#edit').click(function () {
        $('.text').focus();  
    })
    //退出编辑
    $('#complete').click(function () {
        $('.text').blur();  
    })
</script>
</body>
</html>